<!DOCTYPE html>
<html>
    <head>
        <title>新規登録フォーム</title>
    </head>

    <body>
        <!-- 新規登録フォーム -->
        <form id="registerForm">
            <h2>新規登録</h2>
            <label>ユーザー名: <input type="text" name="username" required></label><br>
            <label>ユーザーID: <input type="text" name="userid" required></label><br>
            <label>パスワード: <input type="password" name="password" required></label><br>
            <button type="submit">登録</button>
        </form>
        <p id="registerMessage"></p>

        <script>
            document.getElementById("registerForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const data = {
            username: e.target.username.value,
            userid: e.target.userid.value,
            password: e.target.password.value
            };

            const res = await fetch("/register", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
            });

            const result = await res.json();
            document.getElementById("registerMessage").innerText = result.message;
            });
        </script>
    </body>
</html>